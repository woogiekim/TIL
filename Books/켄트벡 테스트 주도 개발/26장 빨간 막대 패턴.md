# 빨간 막대 패턴

- 이 패턴들은 테스트를 언제 어디에 작성할 것인지, 테스트 작성을 언제 멈출지에 대한 것이다.

## 한 단계 테스트

- 목록에서 다음 테스트를 고를 때 무엇을 기준으로 할 것인가?
- 여러분에게 새로운 무언가를 가르쳐 줄 수 있으며, 구현할 수 있다는 확신이 드는 테스트를 고를 것.


- 내가 테스트 목록을 볼 땐 보통 이런 식이다. "이건 뻔하지, 이것도 뻔하고, 이건 잘 모르겠군, 이건 뻔하고, 이건... 내가 무슨생각으로 적은 거지? 아, 이건 할 수 있겠다."
- 이 마지막 테스트가 바로 내가 다음으로 구현할 테스트인 것이다. 뻔하진 않지만 구현할 수 있다는 확신이 있다.


- 전체 계산 중 간단한 하나의 사례를 나타내는 테스트에서 시작했다면, 이 테스트를 통해 자라는 프로그램은 하향식으로 작성된 것으로 보일 수 있다.
- 반면 전체의 작은 한 조각을 나타내는 테스트에서 시작하여 조금씩 붙여나가는 식이었다면, 이 프로그램은 상향식으로 작성된 것으로 보일 수도 있다.


- 사실은 상향식, 하향식 둘 다 TDD의 프로세스를 효과적으로 설명해 줄 수 없다.


- '성장'은 이롱의 자기유사성을 가진 피드백 고리를 암시하는데, 이 피드백 고리에서는 환경이 프로그램에 영향을 주고 프로그램이 다시 환경에 영향을 준다.
- 둘째로, 만약 메타포가 어떤 방향성을 가질 필요가 있다면 '아는 것에서 모르는 것으로'라는 방향이 유용할 것이다.
- 우리가 어느 정도의 지식과 경험을 가지고 개발을 시작한다는 점, 개발하는 중에 새로운 것을 배우게 될 것임을 예상한다는 점 등을 암시한다.
- 우리는 아는 것에서 모르는 것으로 성장하는 프로그램을 갖게 된다.


## 시작 테스트

- 어떤 테스트로부터 시작하는 게 좋을까? 오퍼레이션이 아무 일도 하지 않는 경우를 먼저 테스트할 것.


- 첫 걸음으로 현실적인 테슽트를 하나 작성한다면 상당히 많은 문제를 한번에 해결해야 하는 상황이 될 것이다.
  - 이 오퍼레이션을 어디에 두어야 하나?
  - 적절한 입력 값은 무엇인가?
  - 이 입력들이 주어졌을 때 적절한 출력은 무엇인가?
- 현실적인 테스트 하나로 시작하면 너무 오랫동안 피드백이 없을 것이다.
- 빨강/초록/리팩토링, 빨강/초록/리팩토링. 여러분은 이 고리가 몇 분 이내로 반복되길 원할 것이다.


- 당신에게 뭔가를 가려쳐 줄 수 있으면서도 빠르게 구현할 수 있는 테스트를 선택하라.
- 만약 뭔가 어렵고 복잡한 것을 처음 구현해보고 있다면 당신은 즉각 조그만 용기의 알약을 하나 먹어야 한다.


## 설명 테스트

- 자동화된 테스트가 더 널리 쓰이게 하려면 어떻게 해야 할까? 테스트를 통해 설명을 요청하고 테스트를 통해 설명하라.


- "당신이 설명한 걸 제가 제대로 이해했는지 한번 얘기해보겠습니다. 예를 들어서 Foo를 이런 식으로 설정하고 Bar를 이런 식으로 설정하면 76이 나와야 한다, 이거죠?" 
- 그리고 테스트를 이용하여 설명하는 방법은 다음과 같다.
- "그러니까 어떻게 해야 하는 건지 설명하겠습니다. Foo를 이런 식으로 설정하고 Bar를 이런 식으로 설정하면 76이 나와야 한다는 겁니다. Foo가 이렇고 Bar가 이러면 답은 67이 되겠죠."


## 학습 테스트

- 외부에서 만든 소프트웨어에 대한 테스트를 작성해야 할 때도 있을까? 패키지의 새로운 기능을 처음으로 사용해보기 전에 작성할 수 있다.


- 라이브러리를 기반으로 뭔가를 만들어야 한다고 치자. 그냥 코딩하고선 그게 잘 돌아가길 바라는 게 조흥ㄹ까? 그것도 한 방법이긴 하다.
- 한 가지 대안은 우리가 이제 막 새 클래스의 새 메소드를 하나 사용한다는 것을 알아채는 것이다.
- 그냥 바로 사용하는 대신 API가 우리 예상대로 실행된다는 것을 확인해줄 만한 작은 테스트를 만들어 보는 것이다.


## 또 다른 테스트

- 어떻게 하면 주제에서 벗어나지 않고 기술적인 논의를 계속하 수 있을까? 주제와 무관한 아이디어가 떠오르면 이에 대한 테스트를 할일 목록에 적어놓고 다시 주제로 돌아올 것.


- 하루 온종일 비생산적인 날들을 보낸 경험에서, 내가 가야 할 길을 놓지 않는 것이 때로는 최선임을 배웠다. 새 아이디어가 떠오르면 존중하고 맞이하되 그것이 내 주의를 흩뜨리지 않게 한다.
- 그 아이디어를 리스트에 적어놓고는 하던 일로 다시 돌아간다.


## 회귀 테스트

- 시스템 장애가 보고될 때 여러분은 무슨 일을 제일 먼저 하는가? 그 장애로 인하여 실패하는 테스트, 그리고 통과할 경우엔 자애가 수정되었다고 볼 수 있는 테스트를 가장 간단하게 작서아할.


- 회귀 테스트란, 사실 여러분에게 완벽한 선견지명이 있다면, 처음 코딩할 때 작성했어야 하는 테스트다.


## 휴식

- 지치고 고난에 빠졌을 땐 뭘 해야 하나? 그럴 땐 좀 쉬는 게 좋다.
- 음료수도 마시고, 좀 걷고, 낮잠도 자보자. 당신이 결정한 것에 대한 감정적 책임과 당신이 타이핑해 넣은 문자들을 손에서 깨끗이 씻어 버리도록 하라.


- 종종 이 정도의 거리 두기를 통해 당신에게 부족했던 아이디어가 튀어 나올 수 있다. 다음과 같은 생각이 들면 여러분은 벌떡 일어날 것이다 "매개 변수를 뒤집은 상태에서 시도한 적은 없었지!"


- 뭘 해야 할지 모르겠으면 샤워하러 가서 뭘 해야 할지 생각날 때까지 계속 샤워를 한다.


- 만약 여러분들이 카페인 중독 상태고 아무 진전도 없는 상황이라면, 그건 아마 너무 오래 휴식을 취하지 않았기 때문일 것이다. 그럴 때엔 산책을 하는 것이 좋다.


## 다시 하기

- 길을 잃은 느낌이 들 땐 어떻게 할까? 코드를 다 지워버리고 처음부터 다시 해보자.


## 싸구려 책상, 좋은 의자

- TDD를 할 때 어떤 물리적 환경이 적절한가? 나머지 시설은 싸구려를 쓸지라도 정말 좋은 의자를 구해라.