# 리팩토링

- 리팩토링 초기에는 아주 작은 단계로 작업할 준비가 되어 있어야 한다.
- 수작업 리팩토링은 에러가 발생하기 쉬운데, 그렇게 해서 더 많은 실수를 하고 그럼 나중에야 잡게 된다면 결국 당신은 리팩토링을 점점 덜 하게 될 것이다.
- 매우 작은 단계로 수작업 리팩토링을 20번 하고 나면, 몇 단계 건너 뛰는 실험을 해보라.
- 자동화된 리팩토링 툴은 리팩토링을 엄청나게 가속화시킨다.
- 20번의 단계를 통해 해야 할 일이 메뉴 아이템 하나로 간단히 해결된다.
- 훌륭한 툴의 지원이 있다는 걸 알고 있다면 코드가 어떤 구조를 갖추길 원하는지 보기 위해 여러 가지 실험을 시도하면서 리팩토링에 훨씬 적극적이게 될 것이다.

## 테스트할 필요가 없는 것은 무엇인가?

- 플립(Phlip)이 알려준 간단한 대답은 이렇다.
- "두려움이 지루함으로 변할 때까지 테스트를 만들어라."
- 당신이 작성하는 것들에 대해서만 테스트해라.
- 불신할 이유가 없ㄱ다면 다른 사람이 만든 코드를 테스트하지 마라.

## 좋은 테스트를 갖췄는지의 여부를 어떻게 알 수 있는가?

- 긴 셋업 코드: 하나의 단순한 단언을 수행하기 위해 수백 줄의 객체 생성 코드가 필요하다면 뭔가 문제가 있는 거다. 객체가 너무 크다는 뜻이므로 나뉠 필요가 있다.
- 셋업 중복: 공통의 셋업 코드를 넣어 둘 공통의 장소를 찾기 힘들다면, 서로 밀접하게 엉킨 객체들이 너무 많다는 뜻이다.
- 실행 시간이 오래 걸리는 테스트: 실행하는 데 오래 걸리면 테스트를 자주 실행하지 않게 되고, 한동안 실행이 안 된 채로 남게 되는 경우가 종종 있고, 이렇게 되면 테스트가 아예 동작하지 않을 수도 있다. 테스트의 실행 시간이 길다는 것이 애플리케이션의 작은 부분만 따로 테스트하기가 힘들다는 것을 의미한다.
- 깨지기 쉬운 테스트: 예상치 못하게 실패하는 테스트가 있다면 이는 애플리케이션의 특정 부분이 다른 부분에 이상한 방법으로 영향을 끼친다는 뜻이다. 연결을 끊거나 두 부분을 합하는 것을 통해 멀리 떨어진 것의 영향력이 없어지도록 설계해야 한다.

## TDD로 프레임워크를 만들려면 어떻게 해야 하나?

