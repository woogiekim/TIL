# 외부 API를 테스트 하는 방법

> 결론: MockWebServer 이나 WrieMock 과 같은 웹서버 모킹 라이브러리 활용 하는 것이 좋다.

## Mocking

- 테스트용으로 WebClient 의 인터페이스들을 구현
    - 커넥터, 요청, 헤더, 응답 등등 여러가지 것들을 일일이 구현해야 해서 테스트에 쏟아부어야 하는 비용이 크다.
- Mockito 와 같은 모킹 라이브러리를 활용해 모킹
    - 일일이 구현해야하는 문제에서는 벗어날 수 있지만 체이닝하는 동작과정에 대해 mock object를 제공해줘야하기 때문에 장황해지고 번거롭다.

## MockWebServer 이나 WrieMock 과 같은 웹서버 모킹 라이브러리 활용

- 라이브러리에서 제공하는 방식대로 테스트하고 싶은 스펙을 정의하여 사용
- 간단한 설정과 서버 스펙 나열로 비교적 간편하게 외부 API 테스트 가능

## 외부 API 서버와 유사한 스펙으로 응답하는 임의의 서버 실행해 테스트

- 비슷한 서버를 제공하는 프로젝트 생성해서 로직작성 
  - 해당 서버를 관리해야 하는 비용과 CI/CD 환경에서 테스트 해야 하는 필요성이 생겼을때
  - CI/CD 서버에 배포를 하든, 클라우드에 배포를 하든 해야하는 비용이 발생한다.
  - 차라리 MockWebServer 이나 WrieMock 과 같은 웹서버 모킹 라이브러리에서 제공하는 UI 를 이용하는 편이 좋다.